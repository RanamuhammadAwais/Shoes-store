(window.webpackJsonp=window.webpackJsonp||[]).push([["component-navigationDesktop"],{"./assets/src/scripts/base/baseComponent.ts":function(e,t,s){"use strict";function a(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){!Object.hasOwnProperty.call(e,t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||a(e[t])})),e}s.d(t,"a",(function(){return u}));var i=s("./node_modules/gia/config.js"),r=s.n(i),o=s("./assets/src/scripts/libs/eventBus.ts"),n=a({BODY:{TOGGLE_OVERLAY:"toggle:overlay",ON_OVERLAY:"on:overlay",OFF_OVERLAY:"off:overlay"},HEADER:{IN_PDP:"header:inPdp"},BREAKPOINTER:{BREAKPOINT_CHANGE:"breakpoint:change"},ADDTOCART:{sizeSelected:"size:selected",colorSelected:"color:selected",itemAdded:"item:added",notifyMe:"notifyMe:true",notifyMeFromModal:"status:true"},PDP:{UPDATE_IMAGES_ON_COLOR_CHANGE:"pdp:changeProductColor",UPDATE_SIZES:"pdp:changeProductSize"},MODAL_EVENTS:{show:"modal:show",close:"modal:close"}}),l=s("./assets/src/scripts/utilities/focusableElementUtils.ts");var c=s("./node_modules/bean/bean.js"),d=s.n(c);class u extends class{constructor(){r.a.set("log",!0),this._grabMessages()}get CUSTOM_MESSAGES(){return n}get Messages(){return{}}_checkMessages(){for(const e in this.Messages)if(window.eventQueue.get(e)){const t=this.Messages[e].bind(this);window.eventQueue.get(e).map((e=>{t(e)})),window.eventQueue.delete(e)}}_grabMessages(){this._messages={};for(const e in this.Messages)if(this.Messages[e]){const t=this.Messages[e].bind(this);this._messages[e]=t,this.GRAB(e,t)}}_ungrabMessages(){for(const e in this._messages)this.UNGRAB(e,this._messages[e])}objectIsEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}EMIT(e,t){return o.a.emit(e,t)}GRAB(e,t){t&&o.a.on(e,t)}UNGRAB(e,t){t&&o.a.off(e,t)}getFirstFocusable(e){return Object(l.b)(e)}getFocusableElements(e){return Object(l.a)(e)}_destroy(){this._ungrabMessages()}}{constructor(e){super(),this.observer=new IntersectionObserver((e=>{if(e[0].isIntersecting){[...e[0].target.querySelectorAll('[data-animated="false"]')].forEach(((e,t)=>{setTimeout((()=>{e.setAttribute("data-animated","true")}),300*t)})),this.observer.unobserve(e[0].target)}}),{threshold:.5}),this._componentElement=e,this._componentElement.setAttribute("data-component-init","true"),this.observer.observe(this._componentElement)}get $el(){return this._componentElement}get $options(){const e={},t=Object.assign({},this.$el.dataset);return Object.keys(t).filter((e=>e.includes("option"))).forEach((s=>{const a=u.cleanOptionKey(s);let i;i=t[s].includes("{")&&t[s].includes("}")?JSON.parse(t[s].replace(/'/g,'"')):u.convertType(t[s]),e[a]=i})),a(e)}get COMPONENT_NAME(){return this.__proto__.constructor.name}static convertType(e){let t;switch(e){case"false":t=!1;break;case"true":t=!0;break;case"null":t=null;break;default:t=e}return t}static cleanOptionKey(e){const t=e.replace("option","");return`${t.charAt(0).toLocaleLowerCase()}${t.slice(1)}`}$on(e,t,s=this.$el,a=null){s&&e&&t&&(a?d.a.on(s,e,a,(e=>{e&&e.stopPropagation(),t(e)})):d.a.on(s,e,(e=>{e&&e.stopPropagation(),t(e)})))}$one(e,t,s=this.$el){d.a.one(s,e,t)}$off(e,t=this.$el){d.a.off(t,e)}$fire(e,t=this.$el){d.a.fire(t,e)}loading(e,t=""){this.EMIT(this.CUSTOM_MESSAGES.LOADER_EVENTS.show,{container:e||this.$el,message:t})}endLoading(e,t,s,a=!1,i){this.EMIT(this.CUSTOM_MESSAGES.LOADER_EVENTS.hide,{container:e||this.$el,message:t,icon:s,error:a,time:i})}}},"./assets/src/scripts/components/navigationDesktop.ts":function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return c}));var a=s("./assets/src/scripts/utilities/keyboardUtils.ts"),i=s("./assets/src/scripts/utilities/a11yUtils.js");var r={thronConf:()=>window.thron,getUrl:function(e){if(!e||!e.mediaId||""===e.mediaId||!this.thronConf())throw new Error("thronUtils.ts/getUrl: data required");let t={divarea:"500x500",prettyname:"category_image",sessId:this.thronConf().sessId||"",type:"image",dpr:"100",scalemode:"none",clientId:this.thronConf().clientId||""},s=Object.assign(Object.assign({},t),e),a="?format=auto&scalemode="+s.scalemode+"&dpr="+s.dpr;return"https://"+s.clientId+"-cdn.thron.com/delivery/public/"+s.type+"/"+s.clientId+"/"+s.mediaId+"/"+s.sessId+"/std/"+s.divarea+"/"+s.prettyname+a}},o=s("./assets/src/scripts/base/baseComponent.ts"),n=s("./assets/src/scripts/utilities/cssUtils.ts"),l=s("./assets/src/scripts/libs/eventBus.ts");class c extends o.a{constructor(e){super(e),"none"!==window.getComputedStyle(this.$el).display&&(this.listenForTriggers(),this.listenForClosers(),this.subcategoryHandler(),l.a.on("navigation:forceclose",(e=>{this.closeAllModals()})))}get SELECTORS(){return{modal:".header-navigation-modal",figure:".header-navigation-figure"}}get CLASSESS(){return{triggerActive:"active",modalActive:"is-open",asyncImg:"category-async-img"}}listenForTriggers(){this.$el.querySelectorAll("[data-dnav-trigger]").forEach((e=>{e.addEventListener("click",(e=>{this.closeAllModals();let t=e.currentTarget;this.openModal(t.getAttribute("data-dnav-trigger"))}))}))}listenForClosers(){this.$el.querySelectorAll("[data-dnav-close]").forEach((e=>{e.addEventListener("click",(e=>{let t=e.currentTarget,s=t.getAttribute("data-dnav-close")||t.closest(this.SELECTORS.modal+"."+this.CLASSESS.modalActive).id;this.closeModal(s)}))})),this.$el.addEventListener("keydown",(e=>{a.a.isEscKey(e)&&(e.preventDefault(),this.closeAllModals())}))}openModal(e){let t=document.getElementById(e);if(!t)throw new Error("no nav modals with ID "+e);t.setAttribute("aria-hidden","false"),t.classList.add(this.CLASSESS.modalActive),this.$el.querySelector(`[data-dnav-trigger="${t.id}"]`).classList.add(this.CLASSESS.triggerActive),n.a.headerHeightAsVariable(),this.subcategoryOpenFirst(t),i.a.focusTrapOn(t),l.a.emit("navigation:open",{modalId:e})}closeModal(e){let t=document.getElementById(e);if(!t)throw new Error("no nav modals to close with ID "+e);t.setAttribute("aria-hidden","true"),t.classList.remove(this.CLASSESS.modalActive),this.$el.querySelector(`[data-dnav-trigger="${t.id}"]`).classList.remove(this.CLASSESS.triggerActive),this.subcategoryCloseAll(),i.a.focusTrapOff(),l.a.emit("navigation:close",{modalId:e})}closeAllModals(){[...this.$el.querySelectorAll(this.SELECTORS.modal)].filter((e=>e.classList.contains(this.CLASSESS.modalActive))).forEach((e=>{this.closeModal(e.id)}))}subcategoryHandler(){this.$el.querySelectorAll("[aria-expanded]").forEach((e=>{e.addEventListener("click",(e=>{this.subcategoryCloseAll();let t=e.currentTarget;t.setAttribute("aria-expanded","true"===t.getAttribute("aria-expanded")?"false":"true"),i.a.focusTrapUpdate(t.closest(this.SELECTORS.modal+"."+this.CLASSESS.modalActive)),t.getAttribute("data-thronid")&&""!==t.getAttribute("data-thronid")&&this.setCategoryImage(t.getAttribute("data-thronid"))}))}))}subcategoryOpenFirst(e){if(e.querySelector("[aria-expanded]")&&e.querySelector("[aria-expanded]").setAttribute("aria-expanded","true"),e.querySelector("[aria-expanded]")&&e.querySelector("[aria-expanded]").getAttribute("data-thronid")&&""!==e.querySelector("[aria-expanded]").getAttribute("data-thronid"))this.setCategoryImage(e.querySelector("[aria-expanded]").getAttribute("data-thronid"));else{let e=this.$el.querySelector(".header-navigation-list>li>.header-navigation-cta.active").getAttribute("data-thronid");e&&this.setCategoryImage(e)}}subcategoryCloseAll(){this.$el.querySelectorAll("[aria-expanded]").forEach((e=>{e.setAttribute("aria-expanded","false")}))}setCategoryImage(e){const t=this.$el.querySelector(this.SELECTORS.modal+"."+this.CLASSESS.modalActive),s=t.querySelector(this.SELECTORS.figure);let a=document.createElement("img"),i=r.getUrl({mediaId:e,divarea:Math.floor(s.offsetWidth)+"x"+Math.floor(s.offsetHeight),dpr:window.devicePixelRatio>1?"200":"100"});a.setAttribute("src",i),a.setAttribute("alt",""),t.getElementsByClassName(this.CLASSESS.asyncImg).length>0&&t.getElementsByClassName(this.CLASSESS.asyncImg)[0].remove(),a.classList.add(this.CLASSESS.asyncImg),s.appendChild(a)}}},"./assets/src/scripts/utilities/a11yUtils.js":function(e,t,s){"use strict";var a=s("./assets/src/scripts/utilities/keyboardUtils.ts");const i={focusedElementsBeforeModal:[],focusableElements:[],focusableSelectors:'button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]',focusTrapOn(e){this.focusedElementsBeforeModal.push(document.activeElement),this.focusableElements=this.getAllFocusableElements(e),this.focusableElements[0]&&this.focusableElements[0].focus(),e.addEventListener("keydown",(e=>this.trapTabKey(e)))},focusTrapUpdate(e){this.focusableElements=this.getAllFocusableElements(e)},focusTrapOff(){if(0===this.focusedElementsBeforeModal.length)return;this.focusedElementsBeforeModal[this.focusedElementsBeforeModal.length-1].focus(),this.focusedElementsBeforeModal.pop()},trapTabKey(e){a.a.isTabKey(e)&&(e.shiftKey?document.activeElement===this.focusableElements[0]&&(e.preventDefault(),this.focusableElements[this.focusableElements.length-1].focus()):document.activeElement===this.focusableElements[this.focusableElements.length-1]&&(e.preventDefault(),this.focusableElements[0].focus()))},getFirstFocusable(e){return this.getAllFocusableElements(e)[0]},getAllFocusableElements(e){return[...e.querySelectorAll(this.focusableSelectors)].filter((e=>!this.isHiddenElement(e)))},isHiddenElement:e=>0===e.offsetWidth||0===e.offsetHeight||"hidden"===window.getComputedStyle(e,null).getPropertyValue("visibility"),toggleEveryTabindex(e,t=-1){e?this.getAllFocusableElements(e).forEach((e=>{e.setAttribute("tabindex",t)})):console.error("Wrapper element is needed in toggleEveryTabindex()")}};t.a=i},"./assets/src/scripts/utilities/focusableElementUtils.ts":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const a='button, [href]:not([aria-hidden="true"]), input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]',i=e=>e.querySelector(a),r=e=>e.querySelectorAll(a)},"./assets/src/scripts/utilities/keyboardUtils.ts":function(e,t,s){"use strict";const a={isEscKey:e=>"Escape"===e.key||"Esc"===e.key||27===e.keyCode,isTabKey:e=>"Tab"===e.key||"Tab"===e.code||9===e.keyCode};t.a=a}}]);