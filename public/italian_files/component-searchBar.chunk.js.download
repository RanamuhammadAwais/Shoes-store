(window.webpackJsonp=window.webpackJsonp||[]).push([["component-searchBar"],{"./assets/src/scripts/base/baseComponent.ts":function(e,t,s){"use strict";function i(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){!Object.hasOwnProperty.call(e,t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||i(e[t])})),e}s.d(t,"a",(function(){return d}));var o=s("./node_modules/gia/config.js"),n=s.n(o),a=s("./assets/src/scripts/libs/eventBus.ts"),r=i({BODY:{TOGGLE_OVERLAY:"toggle:overlay",ON_OVERLAY:"on:overlay",OFF_OVERLAY:"off:overlay"},HEADER:{IN_PDP:"header:inPdp"},BREAKPOINTER:{BREAKPOINT_CHANGE:"breakpoint:change"},ADDTOCART:{sizeSelected:"size:selected",colorSelected:"color:selected",itemAdded:"item:added",notifyMe:"notifyMe:true",notifyMeFromModal:"status:true"},PDP:{UPDATE_IMAGES_ON_COLOR_CHANGE:"pdp:changeProductColor",UPDATE_SIZES:"pdp:changeProductSize"},MODAL_EVENTS:{show:"modal:show",close:"modal:close"}}),l=s("./assets/src/scripts/utilities/focusableElementUtils.ts");var c=s("./node_modules/bean/bean.js"),u=s.n(c);class d extends class{constructor(){n.a.set("log",!0),this._grabMessages()}get CUSTOM_MESSAGES(){return r}get Messages(){return{}}_checkMessages(){for(const e in this.Messages)if(window.eventQueue.get(e)){const t=this.Messages[e].bind(this);window.eventQueue.get(e).map((e=>{t(e)})),window.eventQueue.delete(e)}}_grabMessages(){this._messages={};for(const e in this.Messages)if(this.Messages[e]){const t=this.Messages[e].bind(this);this._messages[e]=t,this.GRAB(e,t)}}_ungrabMessages(){for(const e in this._messages)this.UNGRAB(e,this._messages[e])}objectIsEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}EMIT(e,t){return a.a.emit(e,t)}GRAB(e,t){t&&a.a.on(e,t)}UNGRAB(e,t){t&&a.a.off(e,t)}getFirstFocusable(e){return Object(l.b)(e)}getFocusableElements(e){return Object(l.a)(e)}_destroy(){this._ungrabMessages()}}{constructor(e){super(),this.observer=new IntersectionObserver((e=>{if(e[0].isIntersecting){[...e[0].target.querySelectorAll('[data-animated="false"]')].forEach(((e,t)=>{setTimeout((()=>{e.setAttribute("data-animated","true")}),300*t)})),this.observer.unobserve(e[0].target)}}),{threshold:.5}),this._componentElement=e,this._componentElement.setAttribute("data-component-init","true"),this.observer.observe(this._componentElement)}get $el(){return this._componentElement}get $options(){const e={},t=Object.assign({},this.$el.dataset);return Object.keys(t).filter((e=>e.includes("option"))).forEach((s=>{const i=d.cleanOptionKey(s);let o;o=t[s].includes("{")&&t[s].includes("}")?JSON.parse(t[s].replace(/'/g,'"')):d.convertType(t[s]),e[i]=o})),i(e)}get COMPONENT_NAME(){return this.__proto__.constructor.name}static convertType(e){let t;switch(e){case"false":t=!1;break;case"true":t=!0;break;case"null":t=null;break;default:t=e}return t}static cleanOptionKey(e){const t=e.replace("option","");return`${t.charAt(0).toLocaleLowerCase()}${t.slice(1)}`}$on(e,t,s=this.$el,i=null){s&&e&&t&&(i?u.a.on(s,e,i,(e=>{e&&e.stopPropagation(),t(e)})):u.a.on(s,e,(e=>{e&&e.stopPropagation(),t(e)})))}$one(e,t,s=this.$el){u.a.one(s,e,t)}$off(e,t=this.$el){u.a.off(t,e)}$fire(e,t=this.$el){u.a.fire(t,e)}loading(e,t=""){this.EMIT(this.CUSTOM_MESSAGES.LOADER_EVENTS.show,{container:e||this.$el,message:t})}endLoading(e,t,s,i=!1,o){this.EMIT(this.CUSTOM_MESSAGES.LOADER_EVENTS.hide,{container:e||this.$el,message:t,icon:s,error:i,time:o})}}},"./assets/src/scripts/components/searchBar.ts":function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return l}));var i=s("./assets/src/scripts/base/baseComponent.ts"),o=s("./assets/src/scripts/libs/eventBus.ts"),n=s("./node_modules/axios/index.js"),a=s.n(n),r=s("./assets/src/scripts/utilities/a11yUtils.js");class l extends i.a{constructor(e){super(e),this.inputHandler=this.inputHandler.bind(this),o.a.on("modal:show",(e=>{const t=this.$el;if(t.removeAttribute("readonly"),"modal-navigationmobile"!==e.modalId&&"modal-searchmodaldesktop"!==e.modalId||!e.modal||(this.activeModal=e.modal.querySelector(".modal-dialog"),e.trigger&&e.trigger.dataset.keywords&&(t.value=e.trigger.dataset.keywords,t.nextElementSibling.removeAttribute("disabled")),this.$el.addEventListener("input",this.inputHandler)),"modal-navigationmobile"===e.modalId&&(e.trigger.classList.contains("header-actions-item--search--mobile")||e.trigger.classList.contains("search-keywords--button-mobile"))&&this.activeModal){const e=this.activeModal.querySelector(this.SELECTORS.mobileContent);e&&(e.classList.remove(this.CLASSESS.hide),this.activeModal.querySelector(".modal-content").classList.add(this.CLASSESS.hide)),this.$el.focus()}"modal-navigationmobile"!==e.modalId||e.trigger.classList.contains("header-actions-item--search--mobile")||e.trigger.classList.contains("search-keywords--button-mobile")||!this.activeModal||r.a.focusTrapOn(this.activeModal)})),o.a.on("modal:close",(e=>{const t=this.$el;if(t.setAttribute("readonly","true"),"modal-navigationmobile"===e.modalId||"modal-searchmodaldesktop"===e.modalId){const e=this.activeModal.querySelector(this.SELECTORS.suggestionsWrapper),s=this.activeModal.querySelector(this.SELECTORS.mobileContent);t.value="",e.innerHTML="",this.activeModal.classList.remove("no-results"),s&&(s.classList.add(this.CLASSESS.hide),this.activeModal.querySelector(".modal-content").classList.remove(this.CLASSESS.hide)),this.$el.nextElementSibling.setAttribute("disabled","true"),this.$el.removeEventListener("input",this.inputHandler),r.a.focusTrapOff()}e.modalId})),o.a.on("search:suggestions",(e=>{this.getSuggestions(e.value,e.el,e.url)}))}get SELECTORS(){return{searchInput:".search-input",suggestionsWrapper:".suggestions-wrapper",mobileContent:".header-navigation--mobile .search-content"}}get CLASSESS(){return{noResults:"no-results",printResults:"print-results",hide:"hide"}}inputHandler(e){const t=e.currentTarget,s=this.activeModal.querySelector(this.SELECTORS.suggestionsWrapper),i=this.activeModal.querySelector(this.SELECTORS.mobileContent),o=this.$el.nextElementSibling;0!==t.value.length?(o.removeAttribute("disabled"),this.getSuggestions(t.value,this.activeModal,this.$options.url),i&&(i.classList.remove(this.CLASSESS.hide),this.activeModal.querySelector(".modal-content").classList.add(this.CLASSESS.hide))):(o.setAttribute("disabled","true"),this.activeModal.classList.remove(this.CLASSESS.noResults),s.innerHTML="",i&&(i.classList.add(this.CLASSESS.hide),this.activeModal.querySelector(".modal-content").classList.remove(this.CLASSESS.hide)))}setAttributeA11y(e,t){t?([...e.querySelectorAll(".header-navigation-list-content nav")].forEach((e=>e.setAttribute("aria-hidden","true"))),[...e.querySelectorAll(".header-navigation-list-content nav .header-actions-nav-cta")].forEach((e=>e.setAttribute("tabindex","-1")))):([...e.querySelectorAll(".header-navigation-list-content nav")].forEach((e=>e.setAttribute("aria-hidden","false"))),[...e.querySelectorAll(".header-navigation-list-content nav .header-actions-nav-cta")].forEach((e=>e.setAttribute("tabindex","0"))))}async getSuggestions(e,t,s){let i=e.trim();const o=t.querySelector(this.SELECTORS.suggestionsWrapper),{data:n}=await a()(s.replace("xxxxx",encodeURIComponent(i)));i.length>2?t.classList.add(this.CLASSESS.printResults):t.classList.remove(this.CLASSESS.printResults);const{error:r}=n;r?(t.classList.remove(this.CLASSESS.noResults),o.innerHTML=""):n.noResults?(t.classList.add(this.CLASSESS.noResults),o.innerHTML=`\n        <div class="no-results-container">\n          <p class="no-results-title">${n.titleMessage}</p>\n          <p class="no-results-text">${n.textMessage}</p>\n        </div>`):(t.classList.remove(this.CLASSESS.noResults),o.innerHTML=n)}}},"./assets/src/scripts/utilities/a11yUtils.js":function(e,t,s){"use strict";var i=s("./assets/src/scripts/utilities/keyboardUtils.ts");const o={focusedElementsBeforeModal:[],focusableElements:[],focusableSelectors:'button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]',focusTrapOn(e){this.focusedElementsBeforeModal.push(document.activeElement),this.focusableElements=this.getAllFocusableElements(e),this.focusableElements[0]&&this.focusableElements[0].focus(),e.addEventListener("keydown",(e=>this.trapTabKey(e)))},focusTrapUpdate(e){this.focusableElements=this.getAllFocusableElements(e)},focusTrapOff(){if(0===this.focusedElementsBeforeModal.length)return;this.focusedElementsBeforeModal[this.focusedElementsBeforeModal.length-1].focus(),this.focusedElementsBeforeModal.pop()},trapTabKey(e){i.a.isTabKey(e)&&(e.shiftKey?document.activeElement===this.focusableElements[0]&&(e.preventDefault(),this.focusableElements[this.focusableElements.length-1].focus()):document.activeElement===this.focusableElements[this.focusableElements.length-1]&&(e.preventDefault(),this.focusableElements[0].focus()))},getFirstFocusable(e){return this.getAllFocusableElements(e)[0]},getAllFocusableElements(e){return[...e.querySelectorAll(this.focusableSelectors)].filter((e=>!this.isHiddenElement(e)))},isHiddenElement:e=>0===e.offsetWidth||0===e.offsetHeight||"hidden"===window.getComputedStyle(e,null).getPropertyValue("visibility"),toggleEveryTabindex(e,t=-1){e?this.getAllFocusableElements(e).forEach((e=>{e.setAttribute("tabindex",t)})):console.error("Wrapper element is needed in toggleEveryTabindex()")}};t.a=o},"./assets/src/scripts/utilities/focusableElementUtils.ts":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return n}));const i='button, [href]:not([aria-hidden="true"]), input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]',o=e=>e.querySelector(i),n=e=>e.querySelectorAll(i)},"./assets/src/scripts/utilities/keyboardUtils.ts":function(e,t,s){"use strict";const i={isEscKey:e=>"Escape"===e.key||"Esc"===e.key||27===e.keyCode,isTabKey:e=>"Tab"===e.key||"Tab"===e.code||9===e.keyCode};t.a=i}}]);